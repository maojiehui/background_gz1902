<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.qf.mapper.MenuInfoMapper">
    <resultMap id="menuMap" type="com.qf.pojo.MenuInfo">
        <id property="menuId" column="pid"/>
        <result property="menuName" column="pname"/>
        <result property="url" column="purl"/>
        <result property="menuicon" column="picon"/>
        <collection property="child" ofType="com.qf.pojo.MenuInfo">
            <id property="menuId"  column="cid"></id>
            <result property="menuName" column="cname"></result>
            <result property="url" column="curl"></result>
            <result property="menuicon" column="cicon"></result>
        </collection>
    </resultMap>

    <select id="listAllMenuInfo" resultMap="menuMap">
    select m1.MENUID pid,m1.MENUNAME pname,m1.MENU_URL purl,
    m1.MENUICON picon,m2.MENUID cid,m2.MENUNAME cname,
    m2.MENU_URL curl,m2.MENUICON cicon
    from menuinfo m1,menuinfo m2 where m1.MENUID = m2.PARENTID
    </select>
</mapper>